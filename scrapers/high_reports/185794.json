{
  "reported_to": "shopify-scripts",
  "reported_by": "brakhane ",
  "title": "Crash: mrb_any_to_s can't handle NilClass, Symbol and Fixnum",
  "content": "\nWhen using boxing_word.h (haven't tested other boxing methods yet), mrb_any_to_s is unable to handle NilClass, Symbol and Fixnum. This can be achieved by just deleting :to_s from the class and let mrb_any_to_s crash.\nI tried to come up with a fix but I'm not 100% sure where this should be fixed. The boxing schemas all work slightly different so fixing mrb_any_to_s in a way that it respects the boxing schema is not my preferred choice (as implementation details shouldn't bleed through to that method). I guess it's either the right call to make mrb_any_to_s always safe or pull part of the functionality into the specific boxing header.\nPoC\nWorks with Symbol and Fixnum as well:\nCode 37 Bytes\n1NilClass.remove_method :to_s\n2nil.to_s\nTraces\nSandbox:\nCode 34.03 KiB\n1bin/sandbox_extract crashes/nil_remove_to_s.mrb\n2bin/sandbox_extract:20: [BUG] Segmentation fault at 0x00000000000018\n3ruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-linux]\n4\n5-- Control frame information -----------------------------------------------\n6c:0003 p:---- s:0010 e:000009 CFUNC  :sandbox_eval\n7c:0002 p:0201 s:0005 E:000368 EVAL   bin/sandbox_extract:20 [FINISH]\n8c:0001 p:0000 s:0002 E:0021f0 (none) [FINISH]\n9\n10-- Ruby level backtrace information ----------------------------------------\n11bin/sandbox_extract:20:in `<main>'\n12bin/sandbox_extract:20:in `sandbox_eval'\n13\n14-- Machine register context ------------------------------------------------\n15 RIP: 0x00007fb466086787 RBP: 0x00007fb464c15100 RSP: 0x00007fb464c0bab0\n16 RAX: 0x00007fb464c15100 RBX: 0x00007fb464c0d4e0 RCX: 0x000000000000003a\n17 RDX: 0x0000000000000110 RDI: 0x00007fb464c4ef3a RSI: 0x00007fb46610ca2e\n18  R8: 0x0000000000000003  R9: 0x0000000000000000 R10: 0x0000000000000262\n19 R11: 0x00007fb466090d40 R12: 0x0000000000000000 R13: 0x00007fb464c150b8\n20 R14: 0x00007fb464c0d4e0 R15: 0x00007fb464c18220 EFL: 0x0000000000010206\n21\n22-- C level backtrace information -------------------------------------------\n23/usr/lib/libruby.so.2.3 [0x7fb46a16d455]\n24/usr/lib/libruby.so.2.3 [0x7fb46a16d68c]\n25/usr/lib/libruby.so.2.3 [0x7fb46a047e34]\n26/usr/lib/libruby.so.2.3 [0x7fb46a0f96ce]\n27/usr/lib/libc.so.6 [0x7fb469c6d0b0]\n28/home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so(mrb_any_to_s+0x67) [0x7fb466086787] /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/object.c:442\n29/home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so(mrb_vm_exec+0x762) [0x7fb466097952] /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:1165\n30/home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so(mrb_vm_run+0x57) [0x7fb46609d627] /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:766\n31/home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so(mruby_engine_monitored_eval+0x113) [0x7fb46607c8c3] ../../../../ext/mruby_engine/eval_monitored.c:68\n32/usr/lib/libpthread.so.0(start_thread+0xc4) [0x7fb469a24454]\n33/usr/lib/libc.so.6(clone+0x5f) [0x7fb469d227df]\n34\n35-- Other runtime information -----------------------------------------------\n36\n37* Loaded script: bin/sandbox_extract\n38\n39* Loaded features:\n40\n41    0 enumerator.so\n42    1 thread.rb\n43    2 rational.so\n44    3 complex.so\n45    4 /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n46    5 /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n47    6 /usr/lib/ruby/2.3.0/unicode_normalize.rb\n48    7 /usr/lib/ruby/2.3.0/x86_64-linux/rbconfig.rb\n49    8 /usr/lib/ruby/2.3.0/rubygems/compatibility.rb\n50    9 /usr/lib/ruby/2.3.0/rubygems/defaults.rb\n51   10 /usr/lib/ruby/2.3.0/rubygems/deprecate.rb\n52   11 /usr/lib/ruby/2.3.0/rubygems/errors.rb\n53   12 /usr/lib/ruby/2.3.0/rubygems/version.rb\n54   13 /usr/lib/ruby/2.3.0/rubygems/requirement.rb\n55   14 /usr/lib/ruby/2.3.0/rubygems/platform.rb\n56   15 /usr/lib/ruby/2.3.0/rubygems/basic_specification.rb\n57   16 /usr/lib/ruby/2.3.0/rubygems/stub_specification.rb\n58   17 /usr/lib/ruby/2.3.0/rubygems/util/list.rb\n59   18 /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n60   19 /usr/lib/ruby/2.3.0/rubygems/specification.rb\n61   20 /usr/lib/ruby/2.3.0/rubygems/exceptions.rb\n62   21 /usr/lib/ruby/2.3.0/rubygems/dependency.rb\n63   22 /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb\n64   23 /usr/lib/ruby/2.3.0/monitor.rb\n65   24 /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb\n66   25 /usr/lib/ruby/2.3.0/rubygems.rb\n67   26 /usr/lib/ruby/2.3.0/rubygems/path_support.rb\n68   27 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/version.rb\n69   28 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/core_ext/name_error.rb\n70   29 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/levenshtein.rb\n71   30 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/jaro_winkler.rb\n72   31 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkable.rb\n73   32 /usr/lib/ruby/2.3.0/delegate.rb\n74   33 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/name_error_checkers/class_name_checker.rb\n75   34 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/name_error_checkers/variable_name_checker.rb\n76   35 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/name_error_checkers.rb\n77   36 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/method_name_checker.rb\n78   37 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/null_checker.rb\n79   38 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/formatter.rb\n80   39 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean.rb\n81   40 /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n82   41 /usr/lib/ruby/2.3.0/pathname.rb\n83   42 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/postit_trampoline.rb\n84   43 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/constants.rb\n85   44 /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n86   45 /usr/lib/ruby/2.3.0/rubygems/user_interaction.rb\n87   46 /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n88   47 /usr/lib/ruby/2.3.0/rubygems/config_file.rb\n89   48 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/rubygems_integration.rb\n90   49 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/current_ruby.rb\n91   50 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/shared_helpers.rb\n92   51 /usr/lib/ruby/2.3.0/fileutils.rb\n93   52 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/errors.rb\n94   53 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/environment_preserver.rb\n95   54 /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n96   55 /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n97   56 /usr/lib/ruby/2.3.0/socket.rb\n98   57 /usr/lib/ruby/2.3.0/timeout.rb\n99   58 /usr/lib/ruby/2.3.0/net/protocol.rb\n100   59 /usr/lib/ruby/2.3.0/uri/rfc2396_parser.rb\n101   60 /usr/lib/ruby/2.3.0/uri/rfc3986_parser.rb\n102   61 /usr/lib/ruby/2.3.0/uri/common.rb\n103   62 /usr/lib/ruby/2.3.0/uri/generic.rb\n104   63 /usr/lib/ruby/2.3.0/uri/ftp.rb\n105   64 /usr/lib/ruby/2.3.0/uri/http.rb\n106   65 /usr/lib/ruby/2.3.0/uri/https.rb\n107   66 /usr/lib/ruby/2.3.0/uri/ldap.rb\n108   67 /usr/lib/ruby/2.3.0/uri/ldaps.rb\n109   68 /usr/lib/ruby/2.3.0/uri/mailto.rb\n110   69 /usr/lib/ruby/2.3.0/uri.rb\n111   70 /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n112   71 /usr/lib/ruby/2.3.0/net/http/exceptions.rb\n113   72 /usr/lib/ruby/2.3.0/net/http/header.rb\n114   73 /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n115   74 /usr/lib/ruby/2.3.0/net/http/generic_request.rb\n116   75 /usr/lib/ruby/2.3.0/net/http/request.rb\n117   76 /usr/lib/ruby/2.3.0/net/http/requests.rb\n118   77 /usr/lib/ruby/2.3.0/net/http/response.rb\n119   78 /usr/lib/ruby/2.3.0/net/http/responses.rb\n120   79 /usr/lib/ruby/2.3.0/net/http/proxy_delta.rb\n121   80 /usr/lib/ruby/2.3.0/net/http/backward.rb\n122   81 /usr/lib/ruby/2.3.0/net/http.rb\n123   82 /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n124   83 /usr/lib/ruby/2.3.0/date.rb\n125   84 /usr/lib/ruby/2.3.0/time.rb\n126   85 /usr/lib/ruby/2.3.0/rubygems/request/http_pool.rb\n127   86 /usr/lib/ruby/2.3.0/rubygems/request/https_pool.rb\n128   87 /usr/lib/ruby/2.3.0/rubygems/request/connection_pools.rb\n129   88 /usr/lib/ruby/2.3.0/rubygems/request.rb\n130   89 /usr/lib/ruby/2.3.0/cgi/core.rb\n131   90 /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n132   91 /usr/lib/ruby/2.3.0/cgi/util.rb\n133   92 /usr/lib/ruby/2.3.0/cgi/cookie.rb\n134   93 /usr/lib/ruby/2.3.0/cgi.rb\n135   94 /usr/lib/ruby/2.3.0/rubygems/uri_formatter.rb\n136   95 /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n137   96 /usr/lib/ruby/2.3.0/digest.rb\n138   97 /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n139   98 /usr/lib/ruby/2.3.0/openssl/bn.rb\n140   99 /usr/lib/ruby/2.3.0/openssl/pkey.rb\n141  100 /usr/lib/ruby/2.3.0/openssl/cipher.rb\n142  101 /usr/lib/ruby/2.3.0/openssl/config.rb\n143  102 /usr/lib/ruby/2.3.0/openssl/digest.rb\n144  103 /usr/lib/ruby/2.3.0/openssl/x509.rb\n145  104 /usr/lib/ruby/2.3.0/openssl/buffering.rb\n146  105 /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n147  106 /usr/lib/ruby/2.3.0/openssl/ssl.rb\n148  107 /usr/lib/ruby/2.3.0/openssl.rb\n149  108 /usr/lib/ruby/2.3.0/securerandom.rb\n150  109 /usr/lib/ruby/2.3.0/resolv.rb\n151  110 /usr/lib/ruby/2.3.0/rubygems/remote_fetcher.rb\n152  111 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/gem_remote_fetcher.rb\n153  112 /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n154  113 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/plugin/api/source.rb\n155  114 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/plugin/api.rb\n156  115 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/plugin.rb\n157  116 /usr/lib/ruby/2.3.0/rubygems/util.rb\n158  117 /usr/lib/ruby/2.3.0/rubygems/source/git.rb\n159  118 /usr/lib/ruby/2.3.0/rubygems/source/installed.rb\n160  119 /usr/lib/ruby/2.3.0/rubygems/source/specific_file.rb\n161  120 /usr/lib/ruby/2.3.0/rubygems/source/local.rb\n162  121 /usr/lib/ruby/2.3.0/rubygems/source/lock.rb\n163  122 /usr/lib/ruby/2.3.0/rubygems/source/vendor.rb\n164  123 /usr/lib/ruby/2.3.0/rubygems/source.rb\n165  124 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/gem_helpers.rb\n166  125 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/match_platform.rb\n167  126 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/rubygems_ext.rb\n168  127 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/version.rb\n169  128 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler.rb\n170  129 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/settings.rb\n171  130 /usr/lib/ruby/2.3.0/rubygems/ext/build_error.rb\n172  131 /usr/lib/ruby/2.3.0/rubygems/ext/builder.rb\n173  132 /usr/lib/ruby/2.3.0/rubygems/ext/configure_builder.rb\n174  133 /usr/lib/ruby/2.3.0/tmpdir.rb\n175  134 /usr/lib/ruby/2.3.0/tempfile.rb\n176  135 /usr/lib/ruby/2.3.0/rubygems/ext/ext_conf_builder.rb\n177  136 /usr/lib/ruby/2.3.0/rubygems/ext/rake_builder.rb\n178  137 /usr/lib/ruby/2.3.0/optparse.rb\n179  138 /usr/lib/ruby/2.3.0/rubygems/command.rb\n180  139 /usr/lib/ruby/2.3.0/rubygems/ext/cmake_builder.rb\n181  140 /usr/lib/ruby/2.3.0/rubygems/ext.rb\n182  141 /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n183  142 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source.rb\n184  143 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source/path.rb\n185  144 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source/git.rb\n186  145 /usr/lib/ruby/2.3.0/rubygems/text.rb\n187  146 /usr/lib/ruby/2.3.0/rubygems/name_tuple.rb\n188  147 /usr/lib/ruby/2.3.0/rubygems/spec_fetcher.rb\n189  148 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source/rubygems.rb\n190  149 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/lockfile_parser.rb\n191  150 /usr/lib/ruby/2.3.0/set.rb\n192  151 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/definition.rb\n193  152 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/dependency.rb\n194  153 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/ruby_dsl.rb\n195  154 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/dsl.rb\n196  155 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source_list.rb\n197  156 /home/simon/git/shopify/mruby-engine/lib/mruby_engine/version.rb\n198  157 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/index.rb\n199  158 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source/gemspec.rb\n200  159 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/lazy_specification.rb\n201  160 /usr/lib/ruby/2.3.0/tsort.rb\n202  161 /usr/lib/ruby/2.3.0/forwardable.rb\n203  162 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/spec_set.rb\n204  163 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/gem_version_promoter.rb\n205  164 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/runtime.rb\n206  165 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/ui.rb\n207  166 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/ui/silent.rb\n208  167 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/ui/rg_proxy.rb\n209  168 /usr/lib/ruby/2.3.0/rubygems/util/licenses.rb\n210  169 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/remote_specification.rb\n211  170 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/dep_proxy.rb\n212  171 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/gem_metadata.rb\n213  172 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/errors.rb\n214  173 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/action.rb\n215  174 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/add_edge_no_circular.rb\n216  175 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/add_vertex.rb\n217  176 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/detach_vertex_named.rb\n218  177 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/set_payload.rb\n219  178 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/tag.rb\n220  179 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/log.rb\n221  180 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/vertex.rb\n222  181 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph.rb\n223  182 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/state.rb\n224  183 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/modules/specification_provider.rb\n225  184 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/delegates/resolution_state.rb\n226  185 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/delegates/specification_provider.rb\n227  186 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/resolution.rb\n228  187 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/resolver.rb\n229  188 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/modules/ui.rb\n230  189 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo.rb\n231  190 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendored_molinillo.rb\n232  191 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/resolver.rb\n233  192 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/endpoint_specification.rb\n234  193 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/stub_specification.rb\n235  194 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/setup.rb\n236  195 /usr/lib/ruby/2.3.0/json/version.rb\n237  196 /usr/lib/ruby/2.3.0/ostruct.rb\n238  197 /usr/lib/ruby/2.3.0/json/generic_object.rb\n239  198 /usr/lib/ruby/2.3.0/json/common.rb\n240  199 /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n241  200 /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n242  201 /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n243  202 /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n244  203 /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n245  204 /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n246  205 /usr/lib/ruby/2.3.0/json/ext.rb\n247  206 /usr/lib/ruby/2.3.0/json.rb\n248  207 /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n249  208 /home/simon/git/shopify/mruby-engine/lib/mruby_engine.rb\n250\n251* Process memory map:\n252\n25300400000-00401000 r-xp 00000000 08:03 948907                             /usr/bin/ruby\n25400600000-00601000 r--p 00000000 08:03 948907                             /usr/bin/ruby\n25500601000-00602000 rw-p 00001000 08:03 948907                             /usr/bin/ruby\n25600674000-01729000 rw-p 00000000 00:00 0                                  [heap]\n2577fb45f935000-7fb45fd84000 r--s 00000000 08:04 1838957                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n2587fb45fd84000-7fb460000000 r--s 00000000 08:03 936075                     /usr/lib/libruby.so.2.3.0\n2597fb460000000-7fb460021000 rw-p 00000000 00:00 0 \n2607fb460021000-7fb464000000 ---p 00000000 00:00 0 \n2617fb464018000-7fb4641f5000 r--s 00000000 08:03 934952                     /usr/lib/libc-2.24.so\n2627fb4641f5000-7fb46420b000 r-xp 00000000 08:03 935430                     /usr/lib/libgcc_s.so.1\n2637fb46420b000-7fb46440a000 ---p 00016000 08:03 935430                     /usr/lib/libgcc_s.so.1\n2647fb46440a000-7fb46440b000 r--p 00015000 08:03 935430                     /usr/lib/libgcc_s.so.1\n2657fb46440b000-7fb46440c000 rw-p 00016000 08:03 935430                     /usr/lib/libgcc_s.so.1\n2667fb46440c000-7fb46440d000 ---p 00000000 00:00 0 \n2677fb46440d000-7fb46500d000 rw-p 00000000 00:00 0 \n2687fb46500d000-7fb465014000 r-xp 00000000 08:03 1061028                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n2697fb465014000-7fb465214000 ---p 00007000 08:03 1061028                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n2707fb465214000-7fb465215000 r--p 00007000 08:03 1061028                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n2717fb465215000-7fb465216000 rw-p 00008000 08:03 1061028                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n2727fb465216000-7fb465217000 r-xp 00000000 08:03 948492                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n2737fb465217000-7fb465416000 ---p 00001000 08:03 948492                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n2747fb465416000-7fb465417000 r--p 00000000 08:03 948492                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n2757fb465417000-7fb465418000 rw-p 00001000 08:03 948492                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n2767fb465418000-7fb465419000 r-xp 00000000 08:03 948496                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n2777fb465419000-7fb465618000 ---p 00001000 08:03 948496                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n2787fb465618000-7fb465619000 r--p 00000000 08:03 948496                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n2797fb465619000-7fb46561a000 rw-p 00001000 08:03 948496                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n2807fb46561a000-7fb46561b000 r-xp 00000000 08:03 948511                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n2817fb46561b000-7fb46581b000 ---p 00001000 08:03 948511                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n2827fb46581b000-7fb46581c000 r--p 00001000 08:03 948511                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n2837fb46581c000-7fb46581d000 rw-p 00002000 08:03 948511                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n2847fb46581d000-7fb46581e000 r-xp 00000000 08:03 948515                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n2857fb46581e000-7fb465a1e000 ---p 00001000 08:03 948515                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n2867fb465a1e000-7fb465a1f000 r--p 00001000 08:03 948515                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n2877fb465a1f000-7fb465a20000 rw-p 00002000 08:03 948515                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n2887fb465a20000-7fb465a26000 r-xp 00000000 08:03 1061029                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n2897fb465a26000-7fb465c25000 ---p 00006000 08:03 1061029                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n2907fb465c25000-7fb465c26000 r--p 00005000 08:03 1061029                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n2917fb465c26000-7fb465c27000 rw-p 00006000 08:03 1061029                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n2927fb465c27000-7fb465c4c000 r-xp 00000000 08:03 920898                     /usr/lib/liblzma.so.5.2.2\n2937fb465c4c000-7fb465e4b000 ---p 00025000 08:03 920898                     /usr/lib/liblzma.so.5.2.2\n2947fb465e4b000-7fb465e4c000 r--p 00024000 08:03 920898                     /usr/lib/liblzma.so.5.2.2\n2957fb465e4c000-7fb465e4d000 rw-p 00025000 08:03 920898                     /usr/lib/liblzma.so.5.2.2\n2967fb465e4d000-7fb465e58000 r-xp 00000000 08:03 944077                     /usr/lib/libunwind.so.8.0.1\n2977fb465e58000-7fb466057000 ---p 0000b000 08:03 944077                     /usr/lib/libunwind.so.8.0.1\n2987fb466057000-7fb466058000 r--p 0000a000 08:03 944077                     /usr/lib/libunwind.so.8.0.1\n2997fb466058000-7fb466059000 rw-p 0000b000 08:03 944077                     /usr/lib/libunwind.so.8.0.1\n3007fb466059000-7fb466067000 rw-p 00000000 00:00 0 \n3017fb466067000-7fb46614d000 r-xp 00000000 08:04 1838957                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n3027fb46614d000-7fb46634c000 ---p 000e6000 08:04 1838957                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n3037fb46634c000-7fb46634e000 r--p 000e5000 08:04 1838957                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n3047fb46634e000-7fb466350000 rw-p 000e7000 08:04 1838957                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n3057fb466350000-7fb466355000 r-xp 00000000 08:03 948469                     /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n3067fb466355000-7fb466554000 ---p 00005000 08:03 948469                     /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n3077fb466554000-7fb466555000 r--p 00004000 08:03 948469                     /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n3087fb466555000-7fb466556000 rw-p 00005000 08:03 948469                     /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n3097fb466556000-7fb466557000 r-xp 00000000 08:03 948523                     /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n3107fb466557000-7fb466756000 ---p 00001000 08:03 948523                     /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n3117fb466756000-7fb466757000 r--p 00000000 08:03 948523                     /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n3127fb466757000-7fb466758000 rw-p 00001000 08:03 948523                     /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n3137fb466758000-7fb466759000 r-xp 00000000 08:03 948521                     /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n3147fb466759000-7fb466959000 ---p 00001000 08:03 948521                     /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n3157fb466959000-7fb46695a000 r--p 00001000 08:03 948521                     /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n3167fb46695a000-7fb46695b000 rw-p 00002000 08:03 948521                     /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n3177fb46695b000-7fb46695e000 r-xp 00000000 08:03 948452                     /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n3187fb46695e000-7fb466b5d000 ---p 00003000 08:03 948452                     /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n3197fb466b5d000-7fb466b5e000 r--p 00002000 08:03 948452                     /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n3207fb466b5e000-7fb466b5f000 rw-p 00003000 08:03 948452                     /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n3217fb466b5f000-7fb466dad000 r-xp 00000000 08:03 935797                     /usr/lib/libcrypto.so.1.0.0\n3227fb466dad000-7fb466fac000 ---p 0024e000 08:03 935797                     /usr/lib/libcrypto.so.1.0.0\n3237fb466fac000-7fb466fc8000 r--p 0024d000 08:03 935797                     /usr/lib/libcrypto.so.1.0.0\n3247fb466fc8000-7fb466fd4000 rw-p 00269000 08:03 935797                     /usr/lib/libcrypto.so.1.0.0\n3257fb466fd4000-7fb466fd7000 rw-p 00000000 00:00 0 \n3267fb466fd7000-7fb46703e000 r-xp 00000000 08:03 935796                     /usr/lib/libssl.so.1.0.0\n3277fb46703e000-7fb46723d000 ---p 00067000 08:03 935796                     /usr/lib/libssl.so.1.0.0\n3287fb46723d000-7fb467241000 r--p 00066000 08:03 935796                     /usr/lib/libssl.so.1.0.0\n3297fb467241000-7fb467248000 rw-p 0006a000 08:03 935796                     /usr/lib/libssl.so.1.0.0\n3307fb467248000-7fb467297000 r-xp 00000000 08:03 948468                     /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n3317fb467297000-7fb467497000 ---p 0004f000 08:03 948468                     /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n3327fb467497000-7fb467499000 r--p 0004f000 08:03 948468                     /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n3337fb467499000-7fb46749b000 rw-p 00051000 08:03 948468                     /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n3347fb46749b000-7fb46749c000 rw-p 00000000 00:00 0 \n3357fb46749c000-7fb46749d000 r-xp 00000000 08:03 948519                     /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n3367fb46749d000-7fb46769d000 ---p 00001000 08:03 948519                     /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n3377fb46769d000-7fb46769e000 r--p 00001000 08:03 948519                     /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n3387fb46769e000-7fb46769f000 rw-p 00002000 08:03 948519                     /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n3397fb46769f000-7fb4676ce000 r-xp 00000000 08:03 948450                     /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n3407fb4676ce000-7fb4678ce000 ---p 0002f000 08:03 948450                     /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n3417fb4678ce000-7fb4678cf000 r--p 0002f000 08:03 948450                     /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n3427fb4678cf000-7fb4678d0000 rw-p 00030000 08:03 948450                     /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n3437fb4678d0000-7fb4678d1000 rw-p 00000000 00:00 0 \n3447fb4678d1000-7fb4678d4000 r-xp 00000000 08:03 948498                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n3457fb4678d4000-7fb467ad3000 ---p 00003000 08:03 948498                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n3467fb467ad3000-7fb467ad4000 r--p 00002000 08:03 948498                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n3477fb467ad4000-7fb467ad5000 rw-p 00003000 08:03 948498                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n3487fb467ad5000-7fb467aea000 r-xp 00000000 08:03 935844                     /usr/lib/libz.so.1.2.8\n3497fb467aea000-7fb467ce9000 ---p 00015000 08:03 935844                     /usr/lib/libz.so.1.2.8\n3507fb467ce9000-7fb467cea000 r--p 00014000 08:03 935844                     /usr/lib/libz.so.1.2.8\n3517fb467cea000-7fb467ceb000 rw-p 00015000 08:03 935844                     /usr/lib/libz.so.1.2.8\n3527fb467ceb000-7fb467cf8000 r-xp 00000000 08:03 948479                     /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n3537fb467cf8000-7fb467ef7000 ---p 0000d000 08:03 948479                     /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n3547fb467ef7000-7fb467ef8000 r--p 0000c000 08:03 948479                     /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n3557fb467ef8000-7fb467ef9000 rw-p 0000d000 08:03 948479                     /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n3567fb467ef9000-7fb467efb000 r-xp 00000000 08:03 948520                     /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n3577fb467efb000-7fb4680fa000 ---p 00002000 08:03 948520                     /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n3587fb4680fa000-7fb4680fb000 r--p 00001000 08:03 948520                     /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n3597fb4680fb000-7fb4680fc000 rw-p 00002000 08:03 948520                     /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n3607fb4680fc000-7fb468126000 r-xp 00000000 08:03 948454                     /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n3617fb468126000-7fb468325000 ---p 0002a000 08:03 948454                     /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n3627fb468325000-7fb468326000 r--p 00029000 08:03 948454                     /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n3637fb468326000-7fb468327000 rw-p 0002a000 08:03 948454                     /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n3647fb468327000-7fb46832d000 r-xp 00000000 08:03 948457                     /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n3657fb46832d000-7fb46852c000 ---p 00006000 08:03 948457                     /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n3667fb46852c000-7fb46852d000 r--p 00005000 08:03 948457                     /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n3677fb46852d000-7fb46852e000 rw-p 00006000 08:03 948457                     /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n3687fb46852e000-7fb468532000 r-xp 00000000 08:03 948522                     /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n3697fb468532000-7fb468731000 ---p 00004000 08:03 948522                     /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n3707fb468731000-7fb468732000 r--p 00003000 08:03 948522                     /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n3717fb468732000-7fb468733000 rw-p 00004000 08:03 948522                     /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n3727fb468733000-7fb468739000 r-xp 00000000 08:03 948472                     /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n3737fb468739000-7fb468938000 ---p 00006000 08:03 948472                     /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n3747fb468938000-7fb468939000 r--p 00005000 08:03 948472                     /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n3757fb468939000-7fb46893a000 rw-p 00006000 08:03 948472                     /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n3767fb46893a000-7fb468941000 r-xp 00000000 08:03 948455                     /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n3777fb468941000-7fb468b40000 ---p 00007000 08:03 948455                     /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n3787fb468b40000-7fb468b41000 r--p 00006000 08:03 948455                     /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n3797fb468b41000-7fb468b42000 rw-p 00007000 08:03 948455                     /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n3807fb468b42000-7fb468b44000 r-xp 00000000 08:03 1061025                    /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n3817fb468b44000-7fb468d44000 ---p 00002000 08:03 1061025                    /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n3827fb468d44000-7fb468d45000 r--p 00002000 08:03 1061025                    /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n3837fb468d45000-7fb468d46000 rw-p 00003000 08:03 1061025                    /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n3847fb468d46000-7fb468d48000 r-xp 00000000 08:03 948512                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n3857fb468d48000-7fb468f47000 ---p 00002000 08:03 948512                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n3867fb468f47000-7fb468f48000 r--p 00001000 08:03 948512                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n3877fb468f48000-7fb468f49000 rw-p 00002000 08:03 948512                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n3887fb468f49000-7fb46904a000 rw-p 00000000 00:00 0 \n3897fb46904a000-7fb46914d000 r-xp 00000000 08:03 935421                     /usr/lib/libm-2.24.so\n3907fb46914d000-7fb46934c000 ---p 00103000 08:03 935421                     /usr/lib/libm-2.24.so\n3917fb46934c000-7fb46934d000 r--p 00102000 08:03 935421                     /usr/lib/libm-2.24.so\n3927fb46934d000-7fb46934e000 rw-p 00103000 08:03 935421                     /usr/lib/libm-2.24.so\n3937fb46934e000-7fb469356000 r-xp 00000000 08:03 935412                     /usr/lib/libcrypt-2.24.so\n3947fb469356000-7fb469556000 ---p 00008000 08:03 935412                     /usr/lib/libcrypt-2.24.so\n3957fb469556000-7fb469557000 r--p 00008000 08:03 935412                     /usr/lib/libcrypt-2.24.so\n3967fb469557000-7fb469558000 rw-p 00009000 08:03 935412                     /usr/lib/libcrypt-2.24.so\n3977fb469558000-7fb469586000 rw-p 00000000 00:00 0 \n3987fb469586000-7fb469588000 r-xp 00000000 08:03 935420                     /usr/lib/libdl-2.24.so\n3997fb469588000-7fb469788000 ---p 00002000 08:03 935420                     /usr/lib/libdl-2.24.so\n4007fb469788000-7fb469789000 r--p 00002000 08:03 935420                     /usr/lib/libdl-2.24.so\n4017fb469789000-7fb46978a000 rw-p 00003000 08:03 935420                     /usr/lib/libdl-2.24.so\n4027fb46978a000-7fb46981c000 r-xp 00000000 08:03 935607                     /usr/lib/libgmp.so.10.3.1\n4037fb46981c000-7fb469a1b000 ---p 00092000 08:03 935607                     /usr/lib/libgmp.so.10.3.1\n4047fb469a1b000-7fb469a1c000 r--p 00091000 08:03 935607                     /usr/lib/libgmp.so.10.3.1\n4057fb469a1c000-7fb469a1d000 rw-p 00092000 08:03 935607                     /usr/lib/libgmp.so.10.3.1\n4067fb469a1d000-7fb469a35000 r-xp 00000000 08:03 934933                     /usr/lib/libpthread-2.24.so\n4077fb469a35000-7fb469c34000 ---p 00018000 08:03 934933                     /usr/lib/libpthread-2.24.so\n4087fb469c34000-7fb469c35000 r--p 00017000 08:03 934933                     /usr/lib/libpthread-2.24.so\n4097fb469c35000-7fb469c36000 rw-p 00018000 08:03 934933                     /usr/lib/libpthread-2.24.so\n4107fb469c36000-7fb469c3a000 rw-p 00000000 00:00 0 \n4117fb469c3a000-7fb469dcf000 r-xp 00000000 08:03 934952                     /usr/lib/libc-2.24.so\n4127fb469dcf000-7fb469fce000 ---p 00195000 08:03 934952                     /usr/lib/libc-2.24.so\n4137fb469fce000-7fb469fd2000 r--p 00194000 08:03 934952                     /usr/lib/libc-2.24.so\n4147fb469fd2000-7fb469fd4000 rw-p 00198000 08:03 934952                     /usr/lib/libc-2.24.so\n4157fb469fd4000-7fb469fd8000 rw-p 00000000 00:00 0 \n4167fb469fd8000-7fb46a24c000 r-xp 00000000 08:03 936075                     /usr/lib/libruby.so.2.3.0\n4177fb46a24c000-7fb46a44b000 ---p 00274000 08:03 936075                     /usr/lib/libruby.so.2.3.0\n4187fb46a44b000-7fb46a451000 r--p 00273000 08:03 936075                     /usr/lib/libruby.so.2.3.0\n4197fb46a451000-7fb46a454000 rw-p 00279000 08:03 936075                     /usr/lib/libruby.so.2.3.0\n4207fb46a454000-7fb46a465000 rw-p 00000000 00:00 0 \n4217fb46a465000-7fb46a488000 r-xp 00000000 08:03 934951                     /usr/lib/ld-2.24.so\n4227fb46a4d6000-7fb46a66e000 r--p 00000000 08:03 934978                     /usr/lib/locale/locale-archive\n4237fb46a66e000-7fb46a674000 rw-p 00000000 00:00 0 \n4247fb46a681000-7fb46a683000 r--s 00000000 08:03 948907                     /usr/bin/ruby\n4257fb46a683000-7fb46a684000 ---p 00000000 00:00 0 \n4267fb46a684000-7fb46a687000 rw-p 00000000 00:00 0 \n4277fb46a687000-7fb46a688000 r--p 00022000 08:03 934951                     /usr/lib/ld-2.24.so\n4287fb46a688000-7fb46a689000 rw-p 00023000 08:03 934951                     /usr/lib/ld-2.24.so\n4297fb46a689000-7fb46a68a000 rw-p 00000000 00:00 0 \n4307ffecd510000-7ffecdd0f000 rw-p 00000000 00:00 0                          [stack]\n4317ffecdd45000-7ffecdd47000 r--p 00000000 00:00 0                          [vvar]\n4327ffecdd47000-7ffecdd49000 r-xp 00000000 00:00 0                          [vdso]\n433ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n434\n435\n436[NOTE]\n437You may have encountered a bug in the Ruby interpreter or extension libraries.\n438Bug reports are welcome.\n439For details: http://www.ruby-lang.org/bugreport.html\n440\n441[1]    956 abort (core dumped)  bin/sandbox_extract crashes/nil_remove_to_s.mrb\nGDB:\nCode 3.11 KiB\n1$ gdb attach 730\n2GNU gdb (GDB) 7.12\n3Copyright (C) 2016 Free Software Foundation, Inc.\n4License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n5This is free software: you are free to change and redistribute it.\n6There is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\n7and \"show warranty\" for details.\n8This GDB was configured as \"x86_64-pc-linux-gnu\".\n9Type \"show configuration\" for configuration details.\n10For bug reporting instructions, please see:\n11<http://www.gnu.org/software/gdb/bugs/>.\n12Find the GDB manual and other documentation resources online at:\n13<http://www.gnu.org/software/gdb/documentation/>.\n14For help, type \"help\".\n15Type \"apropos word\" to search for commands related to \"word\"...\n16attach: No such file or directory.\n17Attaching to process 730\n18[New LWP 731]\n19[Thread debugging using libthread_db enabled]\n20Using host libthread_db library \"/usr/lib/libthread_db.so.1\".\n210x00007ffb3f9414b8 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0\n22(gdb) c\n23Continuing.\n24[New Thread 0x7ffb3ab23700 (LWP 823)]\n25\n26Thread 3 \"ruby\" received signal SIGSEGV, Segmentation fault.\n27[Switching to Thread 0x7ffb3ab23700 (LWP 823)]\n28mrb_any_to_s (mrb=0x7ffb3ab244e0, obj=...) at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/object.c:443\n29443\t  mrb_str_concat(mrb, str, mrb_ptr_to_str(mrb, mrb_cptr(obj)));\n30(gdb) bt\n31#0  mrb_any_to_s (mrb=0x7ffb3ab244e0, obj=...) at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/object.c:443\n32#1  0x00007ffb3bfae952 in mrb_vm_exec (mrb=mrb@entry=0x7ffb3ab244e0, proc=<optimized out>, proc@entry=0x7ffb3ab2c130, pc=<optimized out>)\n33    at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:1165\n34#2  0x00007ffb3bfb4627 in mrb_vm_run (mrb=0x7ffb3ab244e0, proc=0x7ffb3ab2c130, self=..., stack_keep=stack_keep@entry=0)\n35    at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:766\n36#3  0x00007ffb3bf938c3 in mruby_engine_monitored_eval (data=0x7ffb3ab243e0) at ../../../../ext/mruby_engine/eval_monitored.c:68\n37#4  0x00007ffb3f93b454 in start_thread () from /usr/lib/libpthread.so.0\n38#5  0x00007ffb3fc397df in clone () from /usr/lib/libc.so.6\n39(gdb) info registers\n40rax            0x7ffb3ab2c100\t140716998312192\n41rbx            0x7ffb3ab244e0\t140716998280416\n42rcx            0x3a\t58\n43rdx            0x110\t272\n44rsi            0x7ffb3c023a2e\t140717020297774\n45rdi            0x7ffb3ab65f3a\t140716998549306\n46rbp            0x7ffb3ab2c100\t0x7ffb3ab2c100\n47rsp            0x7ffb3ab22ab0\t0x7ffb3ab22ab0\n48r8             0x3\t3\n49r9             0x0\t0\n50r10            0x262\t610\n51r11            0x7ffb3bfa7d40\t140717019790656\n52r12            0x0\t0\n53r13            0x7ffb3ab2c0b8\t140716998312120\n54r14            0x7ffb3ab244e0\t140716998280416\n55r15            0x7ffb3ab2f220\t140716998324768\n56rip            0x7ffb3bf9d787\t0x7ffb3bf9d787 <mrb_any_to_s+103>\n57eflags         0x10206\t[ PF IF RF ]\n58cs             0x33\t51\n59ss             0x2b\t43\n60ds             0x0\t0\n61es             0x0\t0\n62fs             0x0\t0\n63gs             0x0\t0\n64(gdb) quit\n65A debugging session is active.\n66\n67\tInferior 1 [process 730] will be detached.\n68\n69Quit anyway? (y or n) y\n70Detaching from program: /usr/bin/ruby, process 730\n\n",
  "severity": [
    7.0,
    8.9
  ],
  "bounty": 8000,
  "weaknesses": [
    "Memory Corruption - Generic"
  ],
  "screenshots": {},
  "disclosed_date": 1481944800,
  "report_url": "https://hackerone.com/reports/185794",
  "is_multi_component": true,
  "complexity": "MEDIUM",
  "novelty": "MEDIUM",
  "vuln_category": "CODE",
  "steps": [
    [
      1,
      "NilClass.remove_method :to_s"
    ],
    [
      2,
      "nil.to_s"
    ]
  ],
  "vuln_description": "The vulnerability occurs when using boxing_word.h in mruby, where mrb_any_to_s cannot handle NilClass, Symbol, and Fixnum types when their :to_s method is removed. This leads to a segmentation fault when attempting to convert these types to strings.",
  "reason": "The vulnerability involves understanding the internal handling of Ruby object types in mruby and the specific behavior when core methods like :to_s are removed. The attacker needs to know about the internal boxing mechanism and how string conversion is handled for different types.",
  "new_complexity": "MEDIUM",
  "requires_code": true,
  "requires_CVE": false,
  "is_ctf": false,
  "other_report": null
}